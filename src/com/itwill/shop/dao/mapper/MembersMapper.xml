<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itwill.shop.dao.mapper.MembersMapper">
	<resultMap type="Members" id="members_Map" autoMapping="true">
		<result column="MEMBERS_NO" property="members_no"/>
		<result column="MEMBERS_NAME" property="members_name"/>
		<result column="MEMBERS_EMAIL" property="members_email"/>
		<result column="MEMBERS_PASSWORD" property="members_password"/>
		<result column="MEMBERS_PHONE" property="members_phone"/>
	</resultMap>
	<resultMap type="Members" id="membersWithCartMap" autoMapping="true">
		<result column="MEMBERS_NO" property="members_no"/>
		<association property="members_no" javaType="Cart" autoMapping="true">
			<result column="CART_NO" property="cart_no"/>
		</association>
	</resultMap>
	<resultMap type="Members" id="membersWithOrdersMap" autoMapping="true">
		<result column="MEMBERS_NO" property="members_no"/>		
		<collection property="members_no" ofType="Orders" javaType="java.util.List" autoMapping="true">
			<result column="ORDERS_NO" property="orders_no"/>
			<result column="ORDERS_DESC" property="orders_desc"/>
			<result column="ORDERS_PRICE" property="orders_price"/>			
		</collection>
	</resultMap>
	<select id="findMembersByNo" parameterType="int" resultMap="members_Map">
		select * from members where members_no = #{members_no}
	</select>
	<select id="findMembersList" parameterType="String" resultMap="members_Map">
		select * from members
	</select>
	<select id="selectAll" parameterType="String" resultMap="members_Map">
		select * from members
	</select>
	<insert id="createMembers" parameterType="com.itwill.shop.domain.Members">
		insert into members(members_no,members_name,members_email,members_password,members_phone) 
		values(members_no_seq.nextval,#{members_name},#{members_email},#{members_password},#{members_phone})
	</insert>
</mapper>